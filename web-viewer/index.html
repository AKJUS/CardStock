<!doctype html>
<html lang="utf-8">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>CardStock Web Viewer</title>
    <script type="text/javascript" src="lib/brython.js"></script>
    <script type="text/javascript" src="lib/brython_stdlib.js"></script>
    <script type="text/javascript" src="lib/fabric.min.js"></script>
    <script type="text/javascript" src="lib/howler.core.min.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/attention.css"/>
    <style>
        * { margin: 0; padding: 0; }
        html { height: 100%; }
        body { min-height: 100%; display: grid; grid-template-rows: auto 1fr auto; }
    </style>
</head>

<body id="body" onload="brython({debug:1, cache:false});">
    <header>
        <div id="canvasContainer">
            <div id="loading"><h3 style="color: #666666;">Loading...</h3></div>
            <canvas id="canvas" height=500 width=500 class="stack" style="border: 1px solid black;"></canvas>
            <noscript>Please enable Javascript to view this page correctly.</noscript>
        </div>
    </header>
</body>

    <script type="text/python" src="startStackCanvas.py" id="__main__"></script>
    <script type="text/python" src="startStackWorker.py" class="webworker" id="stackWorker"></script>
    <script type="text/javascript" src="lib/attention.js"></script>

<script type="text/python" id="drop">
    from browser import window, document

    body = document["body"]

    def dragover(ev):
        ev.preventDefault()
        ev.stopPropagation()
    body.bind("dragover", dragover)

    def drop(ev):
        if len(ev.dataTransfer.files) == 1:
            f = ev.dataTransfer.files[0]
            f.text().then(window.stackCanvas.LoadFromStr)
        ev.preventDefault()
        ev.stopPropagation()
    body.bind("drop", drop)
</script>

<script type="text/javascript">
    window.resourceMap = {};
    window.stackId = "0";
    window.stackName = "";
    window.initialCardNumber = 0;
    window.requestThumbnail = false;
    window.stackJSON =
{
  "type": "stack",
  "handlers": {},
  "properties": {
    "size": [500, 500],
    "canSave": false,
    "canResize": false
  },
  "cards": [
    {
      "type": "card",
      "handlers": {},
      "properties": {
        "name": "card_1",
        "fillColor": "#EEEEEE"
      },
      "childModels": []
    }
  ],
  "CardStock_stack_format": 3,
  "CardStock_stack_version": "0.9.8"
}
</script>
</html>
